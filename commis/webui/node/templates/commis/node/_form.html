{% load i18n commis %}
<div class="content nodeFormContainer">
  <form method="post" id="{{ form_id }}" class="form">
    {% csrf_token %}
    {{ form.non_field_errors }}
    <div class="group form">
      <label class="label" for="node_name">Name</label>
        {{ form.name }}
      <span class="description">The name of the Node</span>
    </div>

    {% if form.run_list.errors %}
    <p>{{ form.run_list.errors }}</p>
    {% endif %}

    <div class="group form" id="run_list_editor_container">
      <div id="availableRunListItemContainer" class="runListEditorColumn">
        <div id="available_roles_container" class="runListItemListContainer">
          <div class="runListEditorLabel">Available Roles</div>
          <div class="sortable runListAvailableItemContainer">
            <ul id="node_available_roles" class="connectedSortable runListAvailableItemList">
              {% for role in available_roles %}
              <li id="role[{{ role }}]" class="ui-state-highlight runListItem">{{ role }}</li>
              {% endfor %}
            </ul>
          </div>
        </div>
        <div id="available_recipes_container" class="runListItemListContainer">
          <div class="runListEditorLabel">Available Recipes</div>
          <div class="sortable runListAvailableItemContainer">
            <ul id="node_available_recipes" class="connectedSortable runListAvailableItemList availableRecipes">
              {% for recipe in available_recipes %}
              <li id="recipe[{{ recipe }}]" class="ui-state-default runListItem">{{ recipe }}</li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
      <div id="run_list_container" class="runListEditorColumn">
        <div class="runListItemListContainer">
          <div class="runListEditorLabel">Run List</div>
          <div class="sortable runListContainer runListContainerForNode">
            <ul class="ui-sortable connectedSortable runListItemList" id="for_node">
              {% for entry in form.run_list.value %}
              <li id="{{ entry }}" class="{% commis_run_list_class entry %} runListItem">{% commis_run_list_name entry %}</li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="group form attrEditor">
      <label class="label">Attributes</label>
      {% commis_jsoneditor node.normal_data %}
      <span class="description">
        A JSON hash for default attributes for nodes of this node.  These attributes will only be applied if the node does not already have a value for the attributes.
      </span>
    </div>

    <div class="group">
      <div class="actions-bar">
        <input type="submit" id="{{ submit_id }}" class="button" value="{{ submit_name }}" />
      </div>
    </div>
  </form>
</div>